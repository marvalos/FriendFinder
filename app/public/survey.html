<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Survey Page</title>

    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>

</head>

<body>

    <div class="container">

        <div class="jumbotron">
            <h1 class="text-center">
                <span class="fa fa-fire"></span> Survey Page</h1>
            <hr>
            <h2 class="text-center"></h2>
            <br>
            <div class="text-center">
                <a href="/">
                    <button class="btn btn-lg btn-default">
                        <span class="fa fa-home"></span>
                    </button>
                </a>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <!-- Reservation Page -->
                <div class="card">
                    <div class="card-header">
                        About You
                    </div>
                    <div class="card-body">
                        <form role="form">
                            <div class="form-group">
                                <label for="reserve-name">Name</label>
                                <input type="text" class="form-control" id="name" required>
                            </div>
                            <div class="form-group">
                                <label for="reserve-phone">Link to Photo of You</label>
                                <input type="text" class="form-control" id="photo" required>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="card">
                    <div class="card-header">
                        Questions
                    </div>
                    <div class="card-body">
                        <h2>Survey Questions</h2>
                        <hr>
                        <section id="survey-form">
                            <section class="form-group">
                                <h3>Question 1</h3>
                                <label for="question1" class="control-label">
                                    Your mind is always buzzing with unexplored ideas and plans.
                                </label>
                                <div>
                                    <select class="form-control" id="question1">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 2</h3>
                                <label for="question2" class="control-label">
                                    Generally speaking, you rely more on your experience than your imagination.
                                </label>
                                <div>
                                    <select class="form-control" id="question2">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 3</h3>
                                <label for="question3" class="control-label">
                                    You find it easy to stay relaxed and focused even when there is some pressure.
                                </label>
                                <div>
                                    <select class="form-control" id="question3">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 4</h3>
                                <label for="question4" class="control-label">
                                    You rarely do something just out of sheer curiosity.
                                </label>
                                <div>
                                    <select class="form-control" id="question4">
                                        <<option value="" selected disabled>Choose</option>
                                            <option value="1">1 (Strongly Disagree)</option>
                                            <option value="2">2 (Disagree)</option>
                                            <option value="3">3 (No Comment)</option>
                                            <option value="4">4 (Agree)</option>
                                            <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 5</h3>
                                <label for="question5" class="control-label">
                                    People can rarely upset you.
                                </label>
                                <div>
                                    <select class="form-control" id="question5">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 6</h3>
                                <label for="question6" class="control-label">
                                    It is often difficult for you to relate to other people’s feelings.
                                </label>
                                <div>
                                    <select class="form-control" id="question6">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 7</h3>
                                <label for="question7" class="control-label">
                                    In a discussion, truth should be more important than people’s sensitivities.
                                </label>
                                <div>
                                    <select class="form-control" id="question7">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 8</h3>
                                <label for="question8" class="control-label">
                                    You rarely get carried away by fantasies and ideas.
                                </label>
                                <div>
                                    <select class="form-control" id="question8">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 9</h3>
                                <label for="question9" class="control-label">
                                    You think that everyone’s views should be respected regardless of whether they are
                                    supported by facts or not.
                                </label>
                                <div>
                                    <select class="form-control" id="question9">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                            <section class="form-group">
                                <h3>Question 10</h3>
                                <label for="question10" class="control-label">
                                    You feel more energetic after spending time with a group of people.
                                </label>
                                <div>
                                    <select class="form-control" id="question10">
                                        <option value="" selected disabled>Choose</option>
                                        <option value="1">1 (Strongly Disagree)</option>
                                        <option value="2">2 (Disagree)</option>
                                        <option value="3">3 (No Comment)</option>
                                        <option value="4">4 (Agree)</option>
                                        <option value="5">5 (Strongly Agree)</option>
                                    </select>
                                </div>
                            </section>
                        </section>
                        <br>
                        <button class="btn btn-primary" type="submit">Submit</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modalContainer">
            <!-- Modal -->
            <div class="modal fade" id="myModal" role="dialog">
                <div class="modal-dialog">

                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                            <h4 class="modal-title"></h4>
                        </div>
                        <div class="modal-body text-center">
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                        </div>
                    </div>

                </div>
            </div>

        </div>

        <footer class="footer">
            <div class="container">
                <p>
                    <a href="/api/friends">API Friends</a> |
                    <a href="https://github.com/marvalos/FriendFinder">GitHub Link</a>
            </div>
        </footer>

    </div>

</body>

</html>

<script type="text/javascript">
    $('#submit').on('click', (event) => {
        event.preventDefault();
        let modalBody = $('.modal-body');
        let name = $('#name').val().trim();
        let photo = $('#photo').val();
        let question1 = parseInt($('#question1').val());
        let question2 = parseInt($('#question2').val());
        let question3 = parseInt($('#question3').val());
        let question4 = parseInt($('#question4').val());
        let question5 = parseInt($('#question5').val());
        let question6 = parseInt($('#question6').val());
        let question7 = parseInt($('#question7').val());
        let question8 = parseInt($('#question8').val());
        let question9 = parseInt($('#question9').val());
        let question10 = parseInt($('#question10').val());
        let answers = {
            name: name,
            photo: photo,
            scores: [
                question1,
                question2,
                question3,
                question4,
                question5,
                question6,
                question7,
                question8,
                question9,
                question10
            ]
        };

        let currentURL = window.location.origin;
        $.post(currentURL + "/api/friends", answers, (data) => {
            if (data.name) {
                modalBody.html("<p>Your new BFF is " + data.name + "</p>");
            } else {
                modalBody.html('<p>Error!</p>');
            }
            $('.modal').modal('toggle');
        });
    });
    $('#survey-form').reset();
</script>